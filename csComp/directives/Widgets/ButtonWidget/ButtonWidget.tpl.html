<div ng-repeat="b in buttons" class="s3d button-container" ng-class="{'button-container-down': b._active}">
    <img class="button-widget-image" ng-if="b.image" ng-src="{{b.image}}"></img>
    <div class="button-widget-content" ng-click="$parent.vm.click(b)" style="width:100%;height:100%">{{b.title}}
        <div ng-hide="b.showLegend && b._active" class="button-widget-description">{{b.description}}</div>
        <div ng-show="b._layer.isLoading" class="spinner" style="position:absolute;right:3px;top:-10px">
            <div class="bounce1" style="background:white"></div>
            <div class="bounce2" style="background:white"></div>
            <div class="bounce3" style="background:white"></div>
        </div>

        <layereditor ng-show="b._layer._gui['editing']" view="icons" class="button-layer-editor" />

        <div ng-if="b.showLegend" ng-show="b._active">
            <div data-ng-if="b._legend" style="float:left;clear:left">

                <div data-ng-if="b._legend.legendKind === 'discrete' || b._legend.legendKind === 'discreteStrings'">
                    <span class="button-legend-label">{{b._lastLegendLabel}}</span>

                    <div data-ng-repeat="le in b._legend.legendEntries " style="float:left;margin-right:4px;margin-top:3px" ng-click="$parent.$parent.$parent.$parent.$parent.vm.createFilter(le, b.group, b.property);$event.stopPropagation();">
                        <div ng-style="{'background-color': le.color}" style="width: 20px;height:8px" uib-tooltip="{{le.label}}"></div>
                    </div>
                    <span class="button-legend-label">{{b._firstLegendLabel}}</span>

                </div>
                <div data-ng-if="b._legend.legendKind === 'interpolated'">
                    <span class="button-legend-label">{{b._lastLegendLabel}}</span>
                    <div data-ng-repeat="le in b._legend.legendEntries" style="float:left;margin-right:4px;margin-top:3px">
                        <div ng-style="{'background-color': le.color}" style="width: 20px;height:8px" uib-tooltip="{{le.label}}"></div>
                    </div>

                    <span class="button-legend-label">{{b._firstLegendLabel}}</span>
                </div>

                <!--<div data-ng-if="b._legend.legendKind === 'interpolated'">
            
            <ul class="legend-entry-list">
                <li data-ng-repeat="(key, le) in b._legend.legendEntries | reverse" class="legend-entry-item-i">
                    <div ng-if="key < legend.legendEntries.length-1"
                         class="legend-color-gradient-rect"
                         ng-style="vm.getStyle(b._legend, le, key)"></div>
                    <div class="legend-label-i">{{le.label}}</div>
            
                    <div>&nbsp;</div>
                </li>
            </ul>
        </div>-->

            </div>

        </div>

    </div>
    <div ng-show="b._canEdit" class="button-edit-button" ng-click="$parent.vm.toggleEditLayer(b)">
        <span ng-if="!b._layer._gui.editing" class="fa fa-pencil" />
        <span ng-if="b._layer._gui.editing" class="fa fa-save" />
    </div>


</div>